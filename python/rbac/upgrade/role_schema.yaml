---

root:
  match: dict
  items:
      version: integer
      roles: role_list
  required_items:
    - version
    - roles

role_list:
  match: list
  item: role

# Role

role:
  match: dict
  items:
    name: string
    description: string
    module_name: module_name
    class_name: class_name
    init_params: json
    apps: app_list
    childs: child_list
  required_items:
    - name
    - module_name
    - class_name

module_name:
  match: set
  variants:
    - rbac.roles

class_name:
  match: set
  variants:
    - ModelRole
    - ObjectRole

child_list:
  match: list
  item: string

app_list:
  match: list
  item: app

# Application permissions

app:
  match: dict
  items:
    label: string
    models: model_list
  required_items:
    - label
    - models

model_list:
  match: list
  item: model

model:
  match: dict
  items:
    name: string
    codenames: codename
  required_items:
    - name
    - codenames

codename:
  match: list
  item: string

# Common types

string:
  match: string

integer:
  match: int

json:
  match: any

map_string_any:
  match: dict
  default_item: base_type

base_type:
  match: one_of
  variants:
    - string
    - integer
