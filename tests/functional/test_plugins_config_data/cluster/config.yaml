---

- type: cluster
  name: Plugins testing
  version: 1

  actions: &cluster_actions
    cluster_int: &cluster_action
      type: job
      script_type: ansible
      script: cluster.yaml
      states:
        available: any
      params:
        ansible_tags: int
    cluster_host:
      <<: *cluster_action
      host_action: true
    cluster_multijob:
      type: task
      scripts:
        - &cluster_multi_script
          name: cint
          script_type: ansible
          script: cluster.yaml
          params:
            ansible_tags: int
        - <<: *cluster_multi_script
          name: cfloat
          params:
            ansible_tags: float
        - <<: *cluster_multi_script
          name: ctext
          params:
            ansible_tags: text
        - <<: *cluster_multi_script
          name: cfile
          params:
            ansible_tags: file
        - <<: *cluster_multi_script
          name: cstring
          params:
            ansible_tags: string
        - <<: *cluster_multi_script
          name: cjson
          params:
            ansible_tags: json
        - <<: *cluster_multi_script
          name: cmap
          params:
            ansible_tags: map
        - <<: *cluster_multi_script
          name: clist
          params:
            ansible_tags: list
      states:
        available: any
    service_name_First_int: &service_name_First_action
      type: job
      script_type: ansible
      script: service_name_First.yaml
      states:
        available: any
      params:
        ansible_tags: int
    service_name_First_host:
      <<: *service_name_First_action
      host_action: true
    service_name_First_multijob:
      type: task
      scripts:
        - &service_name_first_multi_script
          name: sint
          script_type: ansible
          script: service_name_First.yaml
          params:
            ansible_tags: int
        - <<: *service_name_first_multi_script
          name: sfloat
          params:
            ansible_tags: float
        - <<: *service_name_first_multi_script
          name: stext
          params:
            ansible_tags: text
        - <<: *service_name_first_multi_script
          name: sfile
          params:
            ansible_tags: file
        - <<: *service_name_first_multi_script
          name: sstring
          params:
            ansible_tags: string
        - <<: *service_name_first_multi_script
          name: sjson
          params:
            ansible_tags: json
        - <<: *service_name_first_multi_script
          name: smap
          params:
            ansible_tags: map
        - <<: *service_name_first_multi_script
          name: slist
          params:
            ansible_tags: list
      states:
        available: any
    service_name_Second_int: &service_name_Second_action
      type: job
      script_type: ansible
      script: service_name_Second.yaml
      states:
        available: any
      params:
        ansible_tags: int
    service_name_Second_host:
      <<: *service_name_Second_action
      host_action: true
    service_name_Second_multijob:
      type: task
      scripts:
        - &service_name_second_multi_script
          name: sint
          script_type: ansible
          script: service_name_Second.yaml
          params:
            ansible_tags: int
        - <<: *service_name_second_multi_script
          name: sfloat
          params:
            ansible_tags: float
        - <<: *service_name_second_multi_script
          name: stext
          params:
            ansible_tags: text
        - <<: *service_name_second_multi_script
          name: sfile
          params:
            ansible_tags: file
        - <<: *service_name_second_multi_script
          name: sstring
          params:
            ansible_tags: string
        - <<: *service_name_second_multi_script
          name: sjson
          params:
            ansible_tags: json
        - <<: *service_name_second_multi_script
          name: smap
          params:
            ansible_tags: map
        - <<: *service_name_second_multi_script
          name: slist
          params:
            ansible_tags: list
      states:
        available: any
    component_single_component_First_int: &First_component
      type: job
      script_type: ansible
      script: component_First_single_component.yaml
      states:
        available: any
      params:
        ansible_tags: int

    component_single_component_First_host:
      <<: *First_component
      host_action: true

    component_single_component_First_multijob:
      type: task
      scripts:
        - &cFscm
          name: sint
          script_type: ansible
          script: component_First_single_component.yaml
          params:
            ansible_tags: int
        - <<: *cFscm
          name: sfloat
          params:
            ansible_tags: float
        - <<: *cFscm
          name: stext
          params:
            ansible_tags: text
        - <<: *cFscm
          name: sfile
          params:
            ansible_tags: file
        - <<: *cFscm
          name: sstring
          params:
            ansible_tags: string
        - <<: *cFscm
          name: sjson
          params:
            ansible_tags: json
        - <<: *cFscm
          name: smap
          params:
            ansible_tags: map
        - <<: *cFscm
          name: slist
          params:
            ansible_tags: list
      states:
        available: any
    component_another_component_Second_int: &Second_component
      type: job
      script_type: ansible
      script: component_Second_another_component.yaml
      states:
        available: any
      params:
        ansible_tags: int
    component_another_component_Second_host:
      <<: *Second_component
      host_action: true
    component_another_component_Second_multijob:
      type: task
      scripts:
        - &cSacm
          name: sint
          script_type: ansible
          script: component_Second_another_component.yaml
          params:
            ansible_tags: int
        - <<: *cSacm
          name: sfloat
          params:
            ansible_tags: float
        - <<: *cSacm
          name: stext
          params:
            ansible_tags: text
        - <<: *cSacm
          name: sfile
          params:
            ansible_tags: file
        - <<: *cSacm
          name: sstring
          params:
            ansible_tags: string
        - <<: *cSacm
          name: sjson
          params:
            ansible_tags: json
        - <<: *cSacm
          name: smap
          params:
            ansible_tags: map
        - <<: *cSacm
          name: slist
          params:
            ansible_tags: list
      states:
        available: any

  config: &config
    int:
      type: integer
      default: 1
      required: no

    float:
      type: float
      default: 1.0
      required: no
    
    text:
      type: text
      default: |
        xxx
        xxx
      required: no

    file:
      type: file
      default: "file.txt"
      required: no

    string:
      type: string
      default: "zzz"
      required: no

    json:
      type: json
      default:
        - "x": "y"
        - "y": "z"
      required: no

    map:
      type: map
      default:
        "one": "two"
        "two": "three"
      required: no

    list:
      type: list
      default:
        - "one"
        - "two"
        - "three"
      required: no

- type: service
  name: First
  version: 1

  actions: &service_actions
    <<: *cluster_actions

    cluster_host:
      <<: *cluster_action
      display_name: "duplicated_host"

    service_int: &service_action
      type: job
      script_type: ansible
      script: service.yaml
      states:
        available: any
      params:
        ansible_tags: int

    service_host:
      <<: *service_action
      host_action: true

    service_multijob:
      type: task
      scripts:
        - &service_multi_script
          name: sint
          script_type: ansible
          script: service.yaml
          params:
            ansible_tags: int
        - <<: *service_multi_script
          name: sfloat
          params:
            ansible_tags: float
        - <<: *service_multi_script
          name: stext
          params:
            ansible_tags: text
        - <<: *service_multi_script
          name: sfile
          params:
            ansible_tags: file
        - <<: *service_multi_script
          name: sstring
          params:
            ansible_tags: string
        - <<: *service_multi_script
          name: sjson
          params:
            ansible_tags: json
        - <<: *service_multi_script
          name: smap
          params:
            ansible_tags: map
        - <<: *service_multi_script
          name: slist
          params:
            ansible_tags: list
      states:
        available: any

    component_name_single_component_int: &cnsc
      type: job
      script_type: ansible
      script: component_single.yaml
      states:
        available: any
      params:
        ansible_tags: int

    component_name_single_component_host:
      <<: *cnsc
      host_action: true

    component_name_single_component_multijob:
      type: task
      scripts:
        - &single_component_multitask
          name: sint
          script_type: ansible
          script: component_single.yaml
          params:
            ansible_tags: int
        - <<: *single_component_multitask
          name: sfloat
          params:
            ansible_tags: float
        - <<: *single_component_multitask
          name: stext
          params:
            ansible_tags: text
        - <<: *single_component_multitask
          name: sfile
          params:
            ansible_tags: file
        - <<: *single_component_multitask
          name: sstring
          params:
            ansible_tags: string
        - <<: *single_component_multitask
          name: sjson
          params:
            ansible_tags: json
        - <<: *single_component_multitask
          name: smap
          params:
            ansible_tags: map
        - <<: *single_component_multitask
          name: slist
          params:
            ansible_tags: list
      states:
        available: any

  components:
    single_component:  &component
      display_name: Single Component
      config: *config
      actions:
        component_int: &component_action
          type: job
          script_type: ansible
          script: component.yaml
          states:
            available: any
          params:
            ansible_tags: int

        component_host:
          <<: *component_action
          host_action: true

        component_multijob:
          type: task
          scripts:
            - &component_multi_script
              name: cint
              script_type: ansible
              script: component.yaml
              params:
                ansible_tags: int
            - <<: *component_multi_script
              name: cfloat
              params:
                ansible_tags: float
            - <<: *component_multi_script
              name: ctext
              params:
                ansible_tags: text
            - <<: *component_multi_script
              name: cfile
              params:
                ansible_tags: file
            - <<: *component_multi_script
              name: cstring
              params:
                ansible_tags: string
            - <<: *component_multi_script
              name: cjson
              params:
                ansible_tags: json
            - <<: *component_multi_script
              name: cmap
              params:
                ansible_tags: map
            - <<: *component_multi_script
              name: clist
              params:
                ansible_tags: list
          states:
            available: any

        <<: [*cluster_actions, *service_actions]

        cluster_host:
          <<: *cluster_action
          display_name: "duplicated_host"
        service_host:
          <<: *service_action
          display_name: "duplicated_host"


  config: *config

- type: service
  name: Second
  version: 1

  actions:
    <<: [*service_actions, *cluster_actions]

    component_name_another_component_int: &cnac
      type: job
      script_type: ansible
      script: component_another.yaml
      states:
        available: any
      params:
        ansible_tags: int

    component_name_single_component_host:
      <<: *cnac
      host_action: true

    component_name_another_component_multijob:
      type: task
      scripts:
        - &another_component_multitask
          name: sint
          script_type: ansible
          script: component_another.yaml
          params:
            ansible_tags: int
        - <<: *another_component_multitask
          name: sfloat
          params:
            ansible_tags: float
        - <<: *another_component_multitask
          name: stext
          params:
            ansible_tags: text
        - <<: *another_component_multitask
          name: sfile
          params:
            ansible_tags: file
        - <<: *another_component_multitask
          name: sstring
          params:
            ansible_tags: string
        - <<: *another_component_multitask
          name: sjson
          params:
            ansible_tags: json
        - <<: *another_component_multitask
          name: smap
          params:
            ansible_tags: map
        - <<: *another_component_multitask
          name: slist
          params:
            ansible_tags: list
      states:
        available: any

  components:
    another_component:
      <<: *component
      display_name: Another component

  config: *config
