---

- type: cluster
  name: Plugins testing
  version: 1

  actions: &cluster_actions
    cluster_int: &cluster_action
      type: job
      script_type: ansible
      script: cluster.yaml
      states:
        available: any
      params:
        ansible_tags: int

    cluster_float:
      <<: *cluster_action
      params:
        ansible_tags: float

    cluster_text:
      <<: *cluster_action
      params:
        ansible_tags: text

    cluster_file:
      <<: *cluster_action
      params:
        ansible_tags: file

    cluster_string:
      <<: *cluster_action
      params:
        ansible_tags: string

    cluster_json:
      <<: *cluster_action
      params:
        ansible_tags: json

    cluster_map:
      <<: *cluster_action
      params:
        ansible_tags: map

    cluster_list:
      <<: *cluster_action
      params:
        ansible_tags: list

    cluster_multijob:
      type: task
      scripts:
        - &cluster_multi_script
          name: cint
          script_type: ansible
          script: cluster.yaml
          params:
            ansible_tags: int
        - <<: *cluster_multi_script
          name: cfloat
          params:
            ansible_tags: float
        - <<: *cluster_multi_script
          name: ctext
          params:
            ansible_tags: text
        - <<: *cluster_multi_script
          name: cfile
          params:
            ansible_tags: file
        - <<: *cluster_multi_script
          name: cstring
          params:
            ansible_tags: string
        - <<: *cluster_multi_script
          name: cjson
          params:
            ansible_tags: json
        - <<: *cluster_multi_script
          name: cmap
          params:
            ansible_tags: map
        - <<: *cluster_multi_script
          name: clist
          params:
            ansible_tags: list
      states:
        available: any

    service_name_First_int: &service_name_First_action
      type: job
      script_type: ansible
      script: service_name_First.yaml
      states:
        available: any
      params:
        ansible_tags: int

    service_name_First_float:
      <<: *service_name_First_action
      params:
        ansible_tags: float

    service_name_First_text:
      <<: *service_name_First_action
      params:
        ansible_tags: text

    service_name_First_file:
      <<: *service_name_First_action
      params:
        ansible_tags: file

    service_name_First_string:
      <<: *service_name_First_action
      params:
        ansible_tags: string

    service_name_First_json:
      <<: *service_name_First_action
      params:
        ansible_tags: json

    service_name_First_map:
      <<: *service_name_First_action
      params:
        ansible_tags: map

    service_name_First_list:
      <<: *service_name_First_action
      params:
        ansible_tags: list

    service_name_First_multijob:
      type: task
      scripts:
        - &service_name_first_multi_script
          name: sint
          script_type: ansible
          script: service_name_First.yaml
          params:
            ansible_tags: int
        - <<: *service_name_first_multi_script
          name: sfloat
          params:
            ansible_tags: float
        - <<: *service_name_first_multi_script
          name: stext
          params:
            ansible_tags: text
        - <<: *service_name_first_multi_script
          name: sfile
          params:
            ansible_tags: file
        - <<: *service_name_first_multi_script
          name: sstring
          params:
            ansible_tags: string
        - <<: *service_name_first_multi_script
          name: sjson
          params:
            ansible_tags: json
        - <<: *service_name_first_multi_script
          name: smap
          params:
            ansible_tags: map
        - <<: *service_name_first_multi_script
          name: slist
          params:
            ansible_tags: list
      states:
        available: any

    service_name_Second_int: &service_name_Second_action
      type: job
      script_type: ansible
      script: service_name_Second.yaml
      states:
        available: any
      params:
        ansible_tags: int

    service_name_Second_float:
      <<: *service_name_Second_action
      params:
        ansible_tags: float

    service_name_Second_text:
      <<: *service_name_Second_action
      params:
        ansible_tags: text

    service_name_Second_file:
      <<: *service_name_Second_action
      params:
        ansible_tags: file

    service_name_Second_string:
      <<: *service_name_Second_action
      params:
        ansible_tags: string

    service_name_Second_json:
      <<: *service_name_Second_action
      params:
        ansible_tags: json

    service_name_Second_map:
      <<: *service_name_Second_action
      params:
        ansible_tags: map

    service_name_Second_list:
      <<: *service_name_Second_action
      params:
        ansible_tags: list

    service_name_Second_multijob:
      type: task
      scripts:
        - &service_name_second_multi_script
          name: sint
          script_type: ansible
          script: service_name_Second.yaml
          params:
            ansible_tags: int
        - <<: *service_name_second_multi_script
          name: sfloat
          params:
            ansible_tags: float
        - <<: *service_name_second_multi_script
          name: stext
          params:
            ansible_tags: text
        - <<: *service_name_second_multi_script
          name: sfile
          params:
            ansible_tags: file
        - <<: *service_name_second_multi_script
          name: sstring
          params:
            ansible_tags: string
        - <<: *service_name_second_multi_script
          name: sjson
          params:
            ansible_tags: json
        - <<: *service_name_second_multi_script
          name: smap
          params:
            ansible_tags: map
        - <<: *service_name_second_multi_script
          name: slist
          params:
            ansible_tags: list
      states:
        available: any

  config: &config
    int:
      type: integer
      default: 1
      required: no

    float:
      type: float
      default: 1.0
      required: no
    
    text:
      type: text
      default: |
        xxx
        xxx
      required: no

    file:
      type: file
      default: "file.txt"
      required: no

    string:
      type: string
      default: "zzz"
      required: no

    json:
      type: json
      default:
        - "x": "y"
        - "y": "z"
      required: no

    map:
      type: map
      default:
        "one": "two"
        "two": "three"
      required: no

    list:
      type: list
      default:
        - "one"
        - "two"
        - "three"
      required: no

- type: service
  name: First
  version: 1

  actions: &service_actions
    cluster_int:
      <<: *cluster_action

    cluster_float:
      <<: *cluster_action
      params:
        ansible_tags: float

    cluster_text:
      <<: *cluster_action
      params:
        ansible_tags: text

    cluster_file:
      <<: *cluster_action
      params:
        ansible_tags: file

    cluster_string:
      <<: *cluster_action
      params:
        ansible_tags: string

    cluster_json:
      <<: *cluster_action
      params:
        ansible_tags: json

    cluster_map:
      <<: *cluster_action
      params:
        ansible_tags: map

    cluster_list:
      <<: *cluster_action
      params:
        ansible_tags: list

    service_int: &service_action
      type: job
      script_type: ansible
      script: service.yaml
      states:
        available: any
      params:
        ansible_tags: int

    service_float:
      <<: *service_action
      params:
        ansible_tags: float

    service_text:
      <<: *service_action
      params:
        ansible_tags: text

    service_file:
      <<: *service_action
      params:
        ansible_tags: file

    service_string:
      <<: *service_action
      params:
        ansible_tags: string

    service_json:
      <<: *service_action
      params:
        ansible_tags: json

    service_map:
      <<: *service_action
      params:
        ansible_tags: map

    service_list:
      <<: *service_action
      params:
        ansible_tags: list

    service_multijob:
      type: task
      scripts:
        - &service_multi_script
          name: sint
          script_type: ansible
          script: service.yaml
          params:
            ansible_tags: int
        - <<: *service_multi_script
          name: sfloat
          params:
            ansible_tags: float
        - <<: *service_multi_script
          name: stext
          params:
            ansible_tags: text
        - <<: *service_multi_script
          name: sfile
          params:
            ansible_tags: file
        - <<: *service_multi_script
          name: sstring
          params:
            ansible_tags: string
        - <<: *service_multi_script
          name: sjson
          params:
            ansible_tags: json
        - <<: *service_multi_script
          name: smap
          params:
            ansible_tags: map
        - <<: *service_multi_script
          name: slist
          params:
            ansible_tags: list
      states:
        available: any

    <<: *cluster_actions


  components:
    single_component:  &component
      display_name: Single Component
      config: *config
      actions:
        component_int: &component_action
          type: job
          script_type: ansible
          script: component.yaml
          states:
            available: any
          params:
            ansible_tags: int

        component_float:
          <<: *component_action
          params:
            ansible_tags: float

        component_text:
          <<: *component_action
          params:
            ansible_tags: text

        component_file:
          <<: *component_action
          params:
            ansible_tags: file

        component_string:
          <<: *component_action
          params:
            ansible_tags: string

        component_json:
          <<: *component_action
          params:
            ansible_tags: json

        component_map:
          <<: *component_action
          params:
            ansible_tags: map

        component_list:
          <<: *component_action
          params:
            ansible_tags: list

        component_multijob:
          type: task
          scripts:
            - &component_multi_script
              name: cint
              script_type: ansible
              script: component.yaml
              params:
                ansible_tags: int
            - <<: *component_multi_script
              name: cfloat
              params:
                ansible_tags: float
            - <<: *component_multi_script
              name: ctext
              params:
                ansible_tags: text
            - <<: *component_multi_script
              name: cfile
              params:
                ansible_tags: file
            - <<: *component_multi_script
              name: cstring
              params:
                ansible_tags: string
            - <<: *component_multi_script
              name: cjson
              params:
                ansible_tags: json
            - <<: *component_multi_script
              name: cmap
              params:
                ansible_tags: map
            - <<: *component_multi_script
              name: clist
              params:
                ansible_tags: list
          states:
            available: any

        <<: [*cluster_actions, *service_actions]

  config: *config

- type: service
  name: Second
  version: 1

  actions:
    <<: [*service_actions, *cluster_actions]

  components:
    another_component: *component

  config: *config
